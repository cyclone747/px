(function(a,e,n){a.fn.backstretch=function(c,b){return(c===n||0===c.length)&&a.error("No images were supplied for Backstretch"),0===a(e).scrollTop()&&e.scrollTo(0,0),this.each(function(){var e=a(this),g=e.data("backstretch");g&&(b=a.extend(g.options,b),g.destroy(!0));g=new p(this,c,b);e.data("backstretch",g)})};a.backstretch=function(c,b){return a("body").backstretch(c,b).data("backstretch")};a.expr[":"].backstretch=function(c){return a(c).data("backstretch")!==n};a.fn.backstretch.defaults={centeredX:!0,
centeredY:!0,duration:5E3,fade:0};var q={left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},r={position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxWidth:"none",zIndex:-999999},p=function(c,b,d){this.options=a.extend({},a.fn.backstretch.defaults,d||{});this.images=a.isArray(b)?b:[b];a.each(this.images,function(){a("<img />")[0].src=this});this.isBody=c===document.body;this.$container=a(c);this.$wrap=a('<div class="backstretch"></div>').css(q).appendTo(this.$container);
this.$root=this.isBody?k?a(e):a(document):this.$container;this.isBody||(c=this.$container.css("position"),b=this.$container.css("zIndex"),this.$container.css({position:"static"===c?"relative":c,zIndex:"auto"===b?0:b,background:"none"}),this.$wrap.css({zIndex:-999998}));this.$wrap.css({position:this.isBody&&k?"fixed":"absolute"});this.index=0;this.show(this.index);a(e).on("resize.backstretch",a.proxy(this.resize,this)).on("orientationchange.backstretch",a.proxy(function(){this.isBody&&0===e.pageYOffset&&
(e.scrollTo(0,1),this.resize())},this))};p.prototype={resize:function(){try{var a={left:0,top:0},b=this.isBody?this.$root.width():this.$root.innerWidth(),d=b,g=this.isBody?e.innerHeight?e.innerHeight:this.$root.height():this.$root.innerHeight(),i=d/this.$img.data("ratio"),f;i>=g?(f=(i-g)/2,this.options.centeredY&&(a.top="-"+f+"px")):(i=g,d=i*this.$img.data("ratio"),f=(d-b)/2,this.options.centeredX&&(a.left="-"+f+"px"));this.$wrap.css({width:b,height:g}).find("img:not(.deleteable)").css({width:d,height:i}).css(a)}catch(h){}return this},
show:function(c){if(!(Math.abs(c)>this.images.length-1)){this.index=c;var b=this,d=b.$wrap.find("img").addClass("deleteable"),e=a.Event("backstretch.show",{relatedTarget:b.$container[0]});return clearInterval(b.interval),b.$img=a("<img />").css(r).bind("load",function(c){var f=this.width||a(c.target).width(),c=this.height||a(c.target).height();a(this).data("ratio",f/c);b.resize();a(this).fadeIn(b.options.speed||b.options.fade,function(){d.remove();b.paused||b.cycle();b.$container.trigger(e)})}).appendTo(b.$wrap),
b.$img.attr("src",b.images[c]),b}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return 1<this.images.length&&(clearInterval(this.interval),this.interval=setInterval(a.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(c){a(e).off("resize.backstretch orientationchange.backstretch");
clearInterval(this.interval);c||this.$wrap.remove();this.$container.removeData("backstretch")}};var k,f=navigator.userAgent,l=navigator.platform,d=f.match(/AppleWebKit\/([0-9]+)/),d=!!d&&d[1],h=f.match(/Fennec\/([0-9]+)/),h=!!h&&h[1],m=f.match(/Opera Mobi\/([0-9]+)/),s=!!m&&m[1],j=f.match(/MSIE ([0-9]+)/),j=!!j&&j[1];k=!((-1<l.indexOf("iPhone")||-1<l.indexOf("iPad")||-1<l.indexOf("iPod"))&&d&&534>d||e.operamini&&"[object OperaMini]"==={}.toString.call(e.operamini)||m&&7458>s||-1<f.indexOf("Android")&&
d&&533>d||h&&6>h||"palmGetResource"in e&&d&&534>d||-1<f.indexOf("MeeGo")&&-1<f.indexOf("NokiaBrowser/8.5.0")||j&&6>=j)})(jQuery,window);
